name: branch-name-check

on:
  pull_request:

jobs:
  validate-branch-name:
    runs-on: ubuntu-latest

    steps:
      - name: Validate branch name
        run: |
          branch="${GITHUB_HEAD_REF:-${GITHUB_REF_NAME}}"
          echo "Validating branch name: ${branch}"
          if [[ ! "${branch}" =~ ^(hotfix|feature|bug|codex)/[a-z0-9]+(-[a-z0-9]+)*$ ]]; then
            echo "Invalid branch name: ${branch}"
            echo "Branch names must start with hotfix/, feature/, bug/, or codex/ and use dash-separated words, e.g. hotfix/change-in-main."
            exit 1
          fi
